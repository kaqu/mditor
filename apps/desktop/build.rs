use std::{fs, path::Path};

const ICON_BYTES: &[u8] = &[
    0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d,
    0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01,
    0x08, 0x06, 0x00, 0x00, 0x00, 0x1f, 0x15, 0xc4, 0x89, 0x00, 0x00, 0x00,
    0x0d, 0x49, 0x44, 0x41, 0x54, 0x78, 0xda, 0x63, 0xfc, 0xff, 0x9f, 0x81,
    0x17, 0x00, 0x08, 0xff, 0x03, 0xff, 0xa7, 0x75, 0xfb, 0x58, 0x00, 0x00,
    0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 0x42, 0x60, 0x82,
];

fn main() {
    let icon_path = Path::new("target/icon.png");
    if !icon_path.exists() {
        if let Some(parent) = icon_path.parent() {
            fs::create_dir_all(parent).expect("create icon dir");
        }
        fs::write(icon_path, ICON_BYTES).expect("write placeholder icon");
    }
    tauri_build::build();
}
